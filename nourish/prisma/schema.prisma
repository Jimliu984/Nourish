// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

///// Database models /////

// Relational Databse model - to learn
// model Recipe {
//   id          Int         @id @default(autoincrement())
//   name        String
//   mealType    String
//   cookTime    Int
//   servings    Int
//   difficulty  String
//   description String?
//   ingredients String      // JSON String
//   instructions String     // JSON string
//   tags        RecipeTag[] @relation("RecipeTags")
//   isFavorite   Boolean
//   createdAt   DateTime    @default(now())
//   updatedAt   DateTime    @updatedAt
// }

// model Tag {
//   id      Int        @id @default(autoincrement())
//   name    String     @unique
//   recipes RecipeTag[] @relation("RecipeTags")
// }

// model RecipeTag {
//   recipe   Recipe @relation("RecipeTags", fields: [recipeId], references: [id])
//   recipeId Int
//   tag      Tag    @relation("RecipeTags", fields: [tagId], references: [id])
//   tagId    Int

//   @@id([recipeId, tagId]) // composite key ensures uniqueness
// }

model Recipe {
  id          Int         @id @default(autoincrement())
  name        String
  mealType    String      // comma separated
  cookTime    Int
  servings    Int
  difficulty  String
  description String?
  ingredients String      // JSON String
  instructions String     // JSON string
  tags        String      // comma separated
  isFavorite  Boolean
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
} 

model WeekRecipePlan {
  id          Int         @id @default(autoincrement())
  startDate   String      @unique
  monday      String      // JSON since each day has three times, and each time could have multiple recipes
  tuesday     String      // e.g. {breakfast : [1,4], lunch: [3], dinner: [5]}
  wednesday   String
  thursday    String
  friday      String
  saturday    String
  sunday      String
}
